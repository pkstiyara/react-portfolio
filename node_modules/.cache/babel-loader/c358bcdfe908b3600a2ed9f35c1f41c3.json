{"ast":null,"code":"import{useRef}from'react';import{auth,storage,db}from'../../firebase';import{ref,uploadBytes,getDownloadURL}from'firebase/storage';import{addDoc}from'firebase/firestore';import{collection}from'firebase/firestore/lite';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const form=useRef();const submitPortfolio=e=>{var _form$current$,_form$current$2,_form$current$3,_form$current$4;e.preventDefault();const name=(_form$current$=form.current[0])===null||_form$current$===void 0?void 0:_form$current$.value;const description=(_form$current$2=form.current[1])===null||_form$current$2===void 0?void 0:_form$current$2.value;const url=(_form$current$3=form.current[2])===null||_form$current$3===void 0?void 0:_form$current$3.value;const image=(_form$current$4=form.current[3])===null||_form$current$4===void 0?void 0:_form$current$4.files[0];const storageRef=ref(storage,\"portfolio/\".concat(image.name));uploadBytes(storageRef,image).then(snapshot=>{getDownloadURL(snapshot.ref).then(downloadUrl=>{savePortfolio({name,description,url,image:downloadUrl});},error=>{console.log(error);savePortfolio({name,description,url,image:null});});},error=>{console.log(error);savePortfolio({name,description,url,image:null});});};const savePortfolio=async portfolio=>{try{await addDoc(collection(db,'portfolio'),portfolio);window.location.reload(false);}catch(error){alert('Failed to add portfolio');}};return/*#__PURE__*/_jsx(\"div\",{className:\"dashboard\",children:/*#__PURE__*/_jsxs(\"form\",{ref:form,onSubmit:submitPortfolio,children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\"})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Description\"})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Url\"})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",placeholder:\"Image\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>auth.signOut(),children:\"Sign out\"})]})});};export default Home;","map":{"version":3,"sources":["/workspace/react-portfolio/react-portfolio-website/src/components/Dashboard/home.js"],"names":["useRef","auth","storage","db","ref","uploadBytes","getDownloadURL","addDoc","collection","Home","form","submitPortfolio","e","preventDefault","name","current","value","description","url","image","files","storageRef","then","snapshot","downloadUrl","savePortfolio","error","console","log","portfolio","window","location","reload","alert","signOut"],"mappings":"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","sourcesContent":["import { useRef } from 'react';\nimport { auth, storage, db } from '../../firebase';\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { addDoc } from 'firebase/firestore';\nimport { collection } from 'firebase/firestore/lite';\n\n\nconst Home = () => {\n    const form = useRef();\n\n    const submitPortfolio = (e) => {\n        e.preventDefault();\n        const name = form.current[0]?.value;\n        const description = form.current[1]?.value;\n        const url = form.current[2]?.value;\n        const image = form.current[3]?.files[0];\n\n        const storageRef = ref(storage, `portfolio/${image.name}`);\n\n        uploadBytes(storageRef, image).then(\n            (snapshot) => {\n                getDownloadURL(snapshot.ref).then((downloadUrl) => {\n                    savePortfolio({\n                        name,\n                        description,\n                        url,\n                        image: downloadUrl\n                    })\n                }, (error) => {\n                    console.log(error);\n                    savePortfolio({\n                        name,\n                        description,\n                        url,\n                        image: null\n                    })\n                })\n            }, (error) => {\n                console.log(error);\n                savePortfolio({\n                    name,\n                    description,\n                    url,\n                    image: null\n                })\n            }\n        )\n    }\n\n    const savePortfolio = async (portfolio) => {\n        try {\n            await addDoc(collection(db, 'portfolio'), portfolio);\n            window.location.reload(false);\n        } catch (error) {\n            alert('Failed to add portfolio');\n        }\n    }\n\n    return (\n        <div className=\"dashboard\">\n\n            <form ref={form} onSubmit={submitPortfolio}>\n                <p><input type=\"text\" placeholder=\"Name\" /></p>\n                <p><textarea placeholder=\"Description\" /></p>\n                <p><input type=\"text\" placeholder=\"Url\" /></p>\n                <p><input type=\"file\" placeholder=\"Image\" /></p>\n                <button type=\"submit\">Submit</button>\n                <button onClick={() => auth.signOut()}>Sign out</button>\n            </form>\n        </div>\n    )\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}